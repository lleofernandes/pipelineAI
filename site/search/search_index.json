{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Olha essa m\u00e1gina","text":"<p>               Bases: <code>BaseModel</code></p> <p>Modelo de dados para as vendas</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>EmailStr</code> <p>email do comprador</p> required <code>data</code> <code>datetime</code> <p>data da compra</p> required <code>valor</code> <code>PositiveFloat</code> <p>Valor da compra</p> required <code>qtd</code> <code>PositiveInt</code> <p>qtd de produtos</p> required <code>produto</code> <code>ProdutoEnum</code> <p>categoria do produto</p> required Source code in <code>contratodb.py</code> <pre><code>class Vendas(BaseModel):\n    \"\"\"\n    Modelo de dados para as vendas\n\n    Args:\n        email (EmailStr): email do comprador\n        data (datetime): data da compra\n        valor (PositiveFloat): Valor da compra\n        qtd (PositiveInt): qtd de produtos\n        produto (ProdutoEnum): categoria do produto\n    \"\"\"\n\n    email: EmailStr\n    data: datetime\n    valor: PositiveFloat\n    qtd: PositiveInt\n    produto: ProdutoEnum\n</code></pre> <p>Fun\u00e7\u00e3o para salvar no Postgres</p> Source code in <code>database.py</code> <pre><code>def save_postgres(dados: Vendas):\n    \"\"\"\n    Fun\u00e7\u00e3o para salvar no Postgres\n    \"\"\"\n\n\n    try:\n        conn = psycopg2.connect(\n            host = DB_HOST,\n            database = DB_NAME,\n            user = DB_USER,\n            password = DB_PASS\n        )\n        cursor = conn.cursor()\n\n        #inser\u00e7\u00e3o dos dados na tabela de vendas\n        insert_query = sql.SQL(\n            \"\"\"\n            INSERT INTO vendas (email, data, valor, quantidade, produto)\n            VALUES(%s, %s, %s, %s, %s )\n            \"\"\"\n        )\n        cursor.execute(insert_query, (\n            dados.email,\n            dados.data,\n            dados.valor,\n            dados.qtd,\n            dados.produto.value\n        ))\n        conn.commit()\n        cursor.close()\n        st.success(\"Registro foi salvo com sucesso no banco de dados\")\n\n    except Exception as e: \n        st.error(f\"Erro ao salvar no banco de dados: {e}\")\n</code></pre>"}]}